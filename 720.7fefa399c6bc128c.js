"use strict";(self.webpackChunkAngularHero=self.webpackChunkAngularHero||[]).push([[720],{5720:(Ge,Z,a)=>{a.r(Z),a.d(Z,{HttpClientServicesModule:()=>Je});var F=a(9808),C=a(5358),r=a(1223);let W=(()=>{class e{constructor(){this.title="",this.title="Using RxJs with Angular"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-http-client-services"]],decls:8,vars:0,consts:[["routerLink","/http-client-services/http-client-api","routerLinkActive","active"],["routerLink","/http-client-services/rxjs-http","routerLinkActive","active"]],template:function(t,n){1&t&&(r.TgZ(0,"ol")(1,"a",0),r._uU(2," Http API call feature"),r.qZA(),r._uU(3," || "),r.TgZ(4,"a",1),r._uU(5," rxjs - httpcleint, Observable, Promise"),r.qZA(),r.TgZ(6,"ol"),r._UZ(7,"router-outlet"),r.qZA()())},directives:[C.yS,C.Od,C.lC],styles:[""]}),e})();var N=a(4004),B=a(8306);function X(e){switch(e.responseType){case"json":return"response"in e?e.response:JSON.parse(e.responseText);case"document":return e.responseXML;default:return"response"in e?e.response:e.responseText}}class _{constructor(s,t,n,c="download_load"){this.originalEvent=s,this.xhr=t,this.request=n,this.type=c;const{status:l,responseType:f}=t;this.status=null!=l?l:0,this.responseType=null!=f?f:"";const m=t.getAllResponseHeaders();this.responseHeaders=m?m.split("\n").reduce((w,y)=>{const A=y.indexOf(": ");return w[y.slice(0,A)]=y.slice(A+2),w},{}):{},this.response=X(t);const{loaded:d,total:h}=s;this.loaded=d,this.total=h}}const T=(0,a(3888).d)(e=>function(t,n,c){let l;this.message=t,this.name="AjaxError",this.xhr=n,this.request=c,this.status=n.status,this.responseType=n.responseType;try{l=X(n)}catch(f){l=n.responseText}this.response=l}),te=(()=>{function e(s,t){return T.call(this,"ajax timeout",s,t),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(T.prototype),e})();function se(e,s){return S({method:"GET",url:e,headers:s})}function ne(e,s,t){return S({method:"POST",url:e,body:s,headers:t})}function re(e,s){return S({method:"DELETE",url:e,headers:s})}function oe(e,s,t){return S({method:"PUT",url:e,body:s,headers:t})}function ie(e,s,t){return S({method:"PATCH",url:e,body:s,headers:t})}const ce=(0,N.U)(e=>e.response);function le(e,s){return ce(S({method:"GET",url:e,headers:s}))}const S=(()=>{const e=s=>function ue(e){return new B.y(s=>{var t,n;const c=Object.assign({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},e),{queryParams:l,body:f,headers:m}=c;let d=c.url;if(!d)throw new TypeError("url is required");if(l){let o;if(d.includes("?")){const b=d.split("?");if(2<b.length)throw new TypeError("invalid url");o=new URLSearchParams(b[1]),new URLSearchParams(l).forEach((I,P)=>o.set(P,I)),d=b[0]+"?"+o}else o=new URLSearchParams(l),d=d+"?"+o}const h={};if(m)for(const o in m)m.hasOwnProperty(o)&&(h[o.toLowerCase()]=m[o]);const w=c.crossDomain;!w&&!("x-requested-with"in h)&&(h["x-requested-with"]="XMLHttpRequest");const{withCredentials:y,xsrfCookieName:A,xsrfHeaderName:E}=c;if((y||!w)&&A&&E){const o=null!==(n=null===(t=null==document?void 0:document.cookie.match(new RegExp(`(^|;\\s*)(${A})=([^;]*)`)))||void 0===t?void 0:t.pop())&&void 0!==n?n:"";o&&(h[E]=o)}const j=function de(e,s){var t;if(!e||"string"==typeof e||function ye(e){return"undefined"!=typeof FormData&&e instanceof FormData}(e)||function ge(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}(e)||function he(e){return D(e,"ArrayBuffer")}(e)||function fe(e){return D(e,"File")}(e)||function ve(e){return D(e,"Blob")}(e)||function we(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream}(e))return e;if(function me(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(e)}(e))return e.buffer;if("object"==typeof e)return s["content-type"]=null!==(t=s["content-type"])&&void 0!==t?t:"application/json;charset=utf-8",JSON.stringify(e);throw new TypeError("Unknown body type")}(f,h),g=Object.assign(Object.assign({},c),{url:d,headers:h,body:j});let i;i=e.createXHR?e.createXHR():new XMLHttpRequest;{const{progressSubscriber:o,includeDownloadProgress:b=!1,includeUploadProgress:I=!1}=e,P=(u,p)=>{i.addEventListener(u,()=>{var v;const x=p();null===(v=null==o?void 0:o.error)||void 0===v||v.call(o,x),s.error(x)})};P("timeout",()=>new te(i,g)),P("abort",()=>new T("aborted",i,g));const V=(u,p)=>new _(p,i,g,`${u}_${p.type}`),Y=(u,p,v)=>{u.addEventListener(p,x=>{s.next(V(v,x))})};I&&[O,U,M].forEach(u=>Y(i.upload,u,"upload")),o&&[O,U].forEach(u=>i.upload.addEventListener(u,p=>{var v;return null===(v=null==o?void 0:o.next)||void 0===v?void 0:v.call(o,p)})),b&&[O,U].forEach(u=>Y(i,u,J));const K=u=>{s.error(new T("ajax error"+(u?" "+u:""),i,g))};i.addEventListener("error",u=>{var p;null===(p=null==o?void 0:o.error)||void 0===p||p.call(o,u),K()}),i.addEventListener(M,u=>{var p,v;const{status:x}=i;if(x<400){let Q;null===(p=null==o?void 0:o.complete)||void 0===p||p.call(o);try{Q=V(J,u)}catch(Me){return void s.error(Me)}s.next(Q),s.complete()}else null===(v=null==o?void 0:o.error)||void 0===v||v.call(o,u),K(x)})}const{user:q,method:z,async:L}=g;q?i.open(z,d,L,q,g.password):i.open(z,d,L),L&&(i.timeout=g.timeout,i.responseType=g.responseType),"withCredentials"in i&&(i.withCredentials=g.withCredentials);for(const o in h)h.hasOwnProperty(o)&&i.setRequestHeader(o,h[o]);return j?i.send(j):i.send(),()=>{i&&4!==i.readyState&&i.abort()}})}("string"==typeof s?{url:s}:s);return e.get=se,e.post=ne,e.delete=re,e.put=oe,e.patch=ie,e.getJSON=le,e})(),J="download",O="loadstart",U="progress",M="load",pe=Object.prototype.toString;function D(e,s){return pe.call(e)===`[object ${s}]`}function Ae(e,s){if(1&e&&(r.TgZ(0,"ul")(1,"li"),r._uU(2),r.qZA()()),2&e){const t=s.$implicit;r.xp6(2),r.AsE("",t.id,": ",t.name,"")}}let Se=(()=>{class e{constructor(){this.title=""}getData(){S("https://jsonplaceholder.typicode.com/users").pipe((0,N.U)(n=>n.response)).subscribe(n=>{console.log(n),this.data=n})}ngOnInit(){this.getData()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-rxjs-http"]],decls:7,vars:2,consts:[[4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(r.TgZ(0,"p"),r._uU(1,"rxjs-http works!"),r.qZA(),r._uU(2," Http call without httpClient , module using rxjs / ajax "),r.TgZ(3,"div")(4,"h3"),r._uU(5),r.qZA(),r.YNc(6,Ae,3,2,"ul",0),r.qZA()),2&t&&(r.xp6(5),r.Oqu(n.title),r.xp6(1),r.Q6J("ngForOf",n.data))},directives:[F.sg],styles:[""]}),e})();var xe=a(2340),je=a(2843),Ce=a(4482),G=a(5403),He=a(4671),be=a(727);class Te extends be.w0{constructor(s,t){super()}schedule(s,t=0){return this}}const R={setInterval(e,s,...t){const{delegate:n}=R;return(null==n?void 0:n.setInterval)?n.setInterval(e,s,...t):setInterval(e,s,...t)},clearInterval(e){const{delegate:s}=R;return((null==s?void 0:s.clearInterval)||clearInterval)(e)},delegate:void 0};var Re=a(8737);const $={now:()=>($.delegate||Date).now(),delegate:void 0};class H{constructor(s,t=H.now){this.schedulerActionCtor=s,this.now=t}schedule(s,t=0,n){return new this.schedulerActionCtor(this,s).schedule(n,t)}}H.now=$.now;const Oe=new class Pe extends H{constructor(s,t=H.now){super(s,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(s){const{actions:t}=this;if(this._active)return void t.push(s);let n;this._active=!0;do{if(n=s.execute(s.state,s.delay))break}while(s=t.shift());if(this._active=!1,n){for(;s=t.shift();)s.unsubscribe();throw n}}}(class Ee extends Te{constructor(s,t){super(s,t),this.scheduler=s,this.work=t,this.pending=!1}schedule(s,t=0){if(this.closed)return this;this.state=s;const n=this.id,c=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(c,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(c,this.id,t),this}requestAsyncId(s,t,n=0){return R.setInterval(s.flush.bind(s,this),n)}recycleAsyncId(s,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;R.clearInterval(t)}execute(s,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(s,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,t){let c,n=!1;try{this.work(s)}catch(l){n=!0,c=l||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),c}unsubscribe(){if(!this.closed){const{id:s,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Re.P)(n,this),null!=s&&(this.id=this.recycleAsyncId(t,s,null)),this.delay=null,super.unsubscribe()}}});var Ue=a(3532);var Ie=a(8421),Fe=a(262),Ne=a(520);let k=(()=>{class e{constructor(t){this.http=t,this.baseUrl=xe.N.httpAPIUrl}getObservableData(){return this.http.get(this.baseUrl).pipe(function Ze(e=1/0){let s;s=e&&"object"==typeof e?e:{count:e};const{count:t=1/0,delay:n,resetOnSuccess:c=!1}=s;return t<=0?He.y:(0,Ce.e)((l,f)=>{let d,m=0;const h=()=>{let w=!1;d=l.subscribe((0,G.x)(f,y=>{c&&(m=0),f.next(y)},void 0,y=>{if(m++<t){const A=()=>{d?(d.unsubscribe(),d=null,h()):w=!0};if(null!=n){const E="number"==typeof n?function Le(e=0,s,t=Oe){let n=-1;return null!=s&&((0,Ue.K)(s)?t=s:n=s),new B.y(c=>{let l=function De(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;l<0&&(l=0);let f=0;return t.schedule(function(){c.closed||(c.next(f++),0<=n?this.schedule(void 0,n):c.complete())},l)})}(n):(0,Ie.Xf)(n(y,m)),j=(0,G.x)(f,()=>{j.unsubscribe(),A()},()=>{f.complete()});E.subscribe(j)}else A()}else f.error(y)})),w&&(d.unsubscribe(),d=null,h())};h()})}(3),(0,Fe.K)(this.handlerror))}getPromiseCall(){const t=this.http.get(this.baseUrl).toPromise();console.log(t),t.then(n=>{console.log("Promise resolved with: "+JSON.stringify(n))},n=>{console.log("Promise rejected with "+JSON.stringify(n))})}fetchDataAsPromise(){return this.http.get(this.baseUrl).toPromise()}handlerror(t){return 0===t.status?console.error("An error occurred:",t.error):console.error(`Backend returned code ${t.status}, body was: `,t.error),(0,je._)("Something bad happened; please try again later.")}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Ne.eN))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const Be=[{path:"",component:W,children:[{path:"http-client-api",component:(()=>{class e{constructor(t){this.service=t}ngOnInit(){this.getObservableData(),this.fetchData()}getObservableData(){this.service.getObservableData().subscribe(t=>{console.log(t)})}fetchData(){this.service.fetchDataAsPromise().then(t=>{console.log(JSON.stringify(t))}).catch(t=>{console.log("Promise rejected with "+JSON.stringify(t))})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(k))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-http-client"]],decls:6,vars:0,template:function(t,n){1&t&&(r.TgZ(0,"p"),r._uU(1,"http-client works!"),r.qZA(),r.TgZ(2,"h5"),r._uU(3," Http call with Observable "),r.qZA(),r.TgZ(4,"h5"),r._uU(5," Http call with Promise "),r.qZA())},styles:[""]}),e})()},{path:"rxjs-http",component:Se}]}];let Xe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[C.Bz.forChild(Be)],C.Bz]}),e})(),Je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[k],imports:[[F.ez,Xe]]}),e})()}}]);